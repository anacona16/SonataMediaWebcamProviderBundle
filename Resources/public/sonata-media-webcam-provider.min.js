function anacona16SonataMediaWebcamProvider(){if(window.JpegCamera){var a,e=$("#anacona16-sonata-media-webcam-camera"),n=function(o){var s=a.capture();if(JpegCamera.canvas_supported())s.get_canvas(t);else{var c=document.createElement("img");c.src=e.data("no-canvas-photo"),setTimeout(function(){t.call(s,c)},1)}o>1&&setTimeout(function(){n(o-1)},500)},t=function(a){$(a).data("snapshot",this).addClass("anacona16-sonata-media-webcam-item");var n=$("#anacona16-sonata-media-webcam-snapshots").append(a),t=e.innerWidth()/e.innerHeight(),o=n.height();a.style.height=""+o+"px",a.style.width=""+Math.round(t*o)+"px";var s=n[0].scrollWidth-n.innerWidth();n.animate({scrollLeft:s},200)},o=function(){$(".anacona16-sonata-media-webcam-item").removeClass("anacona16-sonata-media-webcam-selected");var a=$(this).addClass("anacona16-sonata-media-webcam-selected").data("snapshot");a.show(),$("#anacona16-sonata-media-webcam-show-stream").show(),a.get_canvas(function(a){$(".anacona16-sonata-media-webcam-provider").val(a.toDataURL("image/jpeg").split(",")[1])})},s=function(){$(this).hide(),$(".anacona16-sonata-media-webcam-item").removeClass("anacona16-sonata-media-webcam-selected"),c(),a.show_stream()},c=function(){$("#anacona16-sonata-media-webcam-show-stream").hide()};$("#anacona16-sonata-media-webcam-take-snapshots").click(function(){n(1)}),$("#anacona16-sonata-media-webcam-snapshots").on("click",".anacona16-sonata-media-webcam-item",o),$("#anacona16-sonata-media-webcam-show-stream").click(s);var i={shutter_ogg_url:e.data("shutter-ogg-url"),shutter_mp3_url:e.data("shutter-mp3-url"),swf_url:e.data("shutter-jpeg-camera")};a=new JpegCamera("#anacona16-sonata-media-webcam-camera",i).ready(function(a){$("#anacona16-sonata-media-webcam-take-snapshots").show()})}}