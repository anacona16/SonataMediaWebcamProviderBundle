!function(){var e=720,t=0,a=!1,n=null,i=null,o=null,c=null,d=null;function r(){n=document.getElementById("anacona16-sonata-media-webcam-camera"),i=document.getElementById("anacona16-sonata-media-webcam-camera-canvas"),o=document.getElementById("anacona16-sonata-media-webcam-snapshots-photo"),c=document.getElementById("anacona16-sonata-media-webcam-take-snapshots"),d=document.querySelector(".anacona16-sonata-media-webcam-provider-binary-content"),null!==n&&(navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){n.srcObject=e,n.play()}).catch(function(e){console.log("An error occurred: "+e)}),n.addEventListener("canplay",function(o){a||(t=n.videoHeight/(n.videoWidth/e),isNaN(t)&&(t=e/(4/3)),n.setAttribute("width",e),n.setAttribute("height",t),i.setAttribute("width",e),i.setAttribute("height",t),a=!0)},!1),c.addEventListener("click",function(a){!function(){var a=i.getContext("2d");if(e&&t){i.width=e,i.height=t,a.drawImage(n,0,0,e,t);var c=i.toDataURL("image/png");o.setAttribute("src",c),d.setAttribute("value",c.split(",")[1])}else u()}(),a.preventDefault()},!1),u())}function u(){var e=i.getContext("2d");e.fillStyle="#AAA",e.fillRect(0,0,i.width,i.height);var t=i.toDataURL("image/png");o.setAttribute("src",t)}window.addEventListener("load",r,!1),jQuery(window).ajaxSuccess(function(e,t,a){a.url.includes("provider=sonata.media.provider.webcam")&&r()})}();
